

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation &mdash; pyBL 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pyBL 0.1.0 documentation" href="index.html" />
    <link rel="next" title="Manual" href="Manual.html" />
    <link rel="prev" title="Introduction" href="Introduction.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Manual.html" title="Manual"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Introduction.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pyBL 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This version of the tutorial requires user to have sudo rights on the machine it is being installed. In case you are running a local version of Python under your $HOME directory, please contact: <a class="reference external" href="mailto:arkilic&#37;&#52;&#48;bnl&#46;gov">arkilic<span>&#64;</span>bnl<span>&#46;</span>gov</a></p>
</div>
<div class="section" id="step-1">
<h2>Step 1<a class="headerlink" href="#step-1" title="Permalink to this headline">¶</a></h2>
<p><strong>Obtain dependencies required for this software:</strong></p>
<p><strong>EPICS:</strong>
Please refer to EPICS Installation Instructions below written by Michael Davidsaver:</p>
<p>NSLS-II Controls Package Repository</p>
<p>This repository contains installable software packages in the Debian Linux format (.deb). The software packaged includes the EPICS distributed control framework, the RTEMS real-time operating system, and related packages. Our goal is to provide a fully functional EPICS environment for users and developers.</p>
<p>Packages in this repository were developed (and are used) by the NSLS-II Controls Group. However, no NSLS-II specific modification have been made. They are also being used by several experimental beamlines at the NSLS.</p>
<p>Currently all packages are built only for Debian Stable (wheezy) on i386 and amd64. However, they can be used with most Debian derived distributions (ie. Ubuntu). At present the limiting factors are time, and lack of a good system to automatically build a series of dependent packages.</p>
<p>Status</p>
<p>Complete listing of repository contents by release point.</p>
<p>Debian Release  NSLS-II Release</p>
<p>Wheezy (7.x)    N/A     N/A     2013B   wheezy  Latest</p>
<p>Squeeze (6.x)   N/A     2012A   2013B   squeeze</p>
<p>Lenny (5.x)     epicsdeb10      2012A   N/A     lenny</p>
<p><strong>Getting Started</strong></p>
<p>Setting up a Debian Stable (wheezy) system to use the repository:
Download the repository signing key: <a class="reference external" href="http://epics.nsls2.bnl.gov/debian/repo-key.pub">http://epics.nsls2.bnl.gov/debian/repo-key.pub</a>
Add the key to the APT keyring with the following command.</p>
<p># apt-key add repo-key.pub</p>
<p>Add the following lines to: /etc/apt/sources.list Also ensure that you include the &#8216;contrib&#8217; on &#8216;non-free&#8217; sections of the main repository (for Open Motif needed by EDM)
deb <a class="reference external" href="http://epics.nsls2.bnl.gov/debian/">http://epics.nsls2.bnl.gov/debian/</a> wheezy main contrib
deb-src <a class="reference external" href="http://epics.nsls2.bnl.gov/debian/">http://epics.nsls2.bnl.gov/debian/</a> wheezy main contrib</p>
<p>(Remember the space between debian/ and wheezy)
Fetch the list of packages.</p>
<p># apt-get update</p>
<p>Install packages.</p>
<p># apt-get install [see list below...]
Note: BNL on-site users remember to configure APT to use the web proxy.</p>
<p>Useful groups of packages to install</p>
<p>Basic EPICS Development Environment</p>
<p>epics-dev build-essential</p>
<p>Linux IOC Dev. Environment (additional)</p>
<p>epics-synapps-dev epics-iocstats-dev visualdct openjdk-6-jdk sysv-rc-softioc</p>
<p>Operator console</p>
<p>edm edm-synapps edm-iocstats striptool alh</p>
<p>As an example</p>
<p># apt-get install edm edm-synapps
...</p>
<p>$ export EDMDATAFILES=.:/usr/lib/epics/op/edl</p>
<p>$ edm -m &#8216;P=somename:,M=axis1&#8217; motorx_all</p>
<p>This has installed the EDM display manager and all the panels which are part of the synApps distribution. For a full list of installable packages see the package listing page.</p>
<p>Parital List of Packaged Software</p>
<p>Some package which will probably be of interest.</p>
<p>Name    Description</p>
<p>Clients</p>
<p>edm     The Extensible Display Manager</p>
<p>alh     The EPICS Alarm Handler</p>
<p>striptool       Strip-chart plotting tool</p>
<p>python-cothread Simple and powerful Python language bindings for EPICS Channel Access clients</p>
<p>epics-catools   Command Line tools (caget, caput, camonitor, ...)</p>
<p>Linux softIOCs</p>
<p>epics-dev       EPICS Base headers and utilities.</p>
<p>epics-synapps-dev       synApps headers and utilities</p>
<p>procserv        Process Server. For running softIoc as daemons.</p>
<p>sysv-rc-softioc SysV style script to start softIocs automatically at boot.</p>
<p>RTEMS IOCs</p>
<p>rtems-gesys-mvme3100    RTEMS Generic System Application (for Emerson MVME3100)</p>
<p>epics-synapps-mvme3100  synApps headers and utilities (for RTEMS on MVME3100)</p>
<p>RTEMS</p>
<p>Currently only the following architectures and Board Support Packages are included. If you use EPICS with a BSP which is included in the RTEMS distribution, but not listed here then let us know.</p>
<p>Architecture    BSP name</p>
<p>i386    pc386</p>
<p>powerpc mvme2100</p>
<p>powerpc mvme2307</p>
<p>powerpc mvme3100</p>
<p>powerpc mvme5500</p>
<p>Releases</p>
<p>Releases are made by making a copy of the current (stable) repository and giving it a name. Once a release is made it will receive only bug-fixes.</p>
<p>Name    Date    Debian Release  EPICS Base      synApps</p>
<p>wheezy/2013A    August 2013     Wheezy (7.0)    3.14.12.3       20130320</p>
<p>squeeze/2013A   August 2013     Squeeze (6.0)   3.14.12.3       20130320</p>
<p>squeeze/2012A   Febuary 2012    Squeeze (6.0)   3.14.11 20111025</p>
<p>lenny/2012A     Febuary 2012    Lenny (5.0)     3.14.11 20111025</p>
<p>epicsdeb10      May 2010        Lenny (5.0)     3.14.10 5.4.1</p>
<p>Building Packages from Source</p>
<p>All source code used to produce the precompiled binary packages in this repository is also present as source packages. These can be obtained and built in two ways.</p>
<p>All binary packages in this repository are built in a clean snapshot of a virtual machine (QEmu or VirualBox). This is done to verify build dependecies and to guard against unintended dependecies.</p>
<p>Release Source</p>
<p>Simply request the source package from the repository.</p>
<p>$ mkdir dpack</p>
<p>$ cd dpack</p>
<p>$ sudo apt-get build-dep epics-base</p>
<p>$ apt-get source epics-base</p>
<p>$ cd cd epics-base-3.14.10</p>
<p>$ debuild -us -uc</p>
<p>$ cd ..</p>
<p>$ sudo dpkg -i <em>.deb</em></p>
<p>Versioned Source</p>
<p>The source and patches of all packages are tracked with the Git version control system. These Git repositories use Pristine-tar to store the tarball. Allowing them to be entirely self contained. The git-buildpackage tool can be used to control the build process.</p>
<p>$ mkdir dpack</p>
<p>$ cd dpack</p>
<p>$ mkdir tmp</p>
<p>$ git clone <a class="reference external" href="http://pubweb.bnl.gov/~mdavidsaver/git/dpack/epics-base.git">http://pubweb.bnl.gov/~mdavidsaver/git/dpack/epics-base.git</a></p>
<p>$ cd epics-base</p>
<p>$ git-buildpackage &#8211;git-pristine-tar &#8211;git-export-dir=$PWD/../tmp</p>
<p>All Git repositories are available here or here for anonymous read-only access.</p>
<p>BNL Proxy</p>
<p>For computers on-site, APT needs to be configured to use the http proxy. This can be set in the file /etc/apt/apt.conf:</p>
<p>Acquire::http::Proxy::mirror.bnl.gov &#8220;DIRECT&#8221;;</p>
<p>Acquire::http::Proxy  &#8220;http://192.168.1.130:3128&#8221;;</p>
<p>Sets the default proxy, but bypasses it for the local Debian mirror. Remember that this will be overridden by the http_proxy environment variable.</p>
<p><strong>PYTHON2.7 and PYTHON-DEV(required for python-cothread):</strong></p>
<p>$sudo apt-get install python2.7</p>
<p>$sudo apt-get install python-dev</p>
<p><strong>PYTHON-COTHREAD:</strong></p>
<p>$sudo apt-get install python-cothread</p>
<p><strong>PYTHON-REQUESTS:</strong></p>
<p>$sudo apt-get install python-requests</p>
<p><strong>NUMPY and SCIPY:</strong></p>
<p>$sudo apt-get install python2.7-numpy</p>
<p>$sudo apt-get install python2.7-scipy</p>
<p><strong>IPYTHON:</strong></p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Make sure that ipython is version .11+</p>
</div>
<p>$sudo apt-get install ipython</p>
</div>
<div class="section" id="step-2">
<h2>Step 2<a class="headerlink" href="#step-2" title="Permalink to this headline">¶</a></h2>
<p><strong>Clone git repository:</strong>
$git clone <a class="reference external" href="https://github.com/arkilic/pyBL.git">https://github.com/arkilic/pyBL.git</a></p>
</div>
<div class="section" id="step-3">
<h2>Step 3<a class="headerlink" href="#step-3" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Perform this step only if you do not have active motor EPICS motor PVs!</p>
</div>
<p><strong>Build simulated EPICS motor record under motorSim folder inside git repository</strong></p>
<p>$cd motorSim</p>
<p>$make clean</p>
<p>$make</p>
<p>Once the installation is complete, confirm simulated motors are running properly:</p>
<p>./startSimMotorEdm.sh</p>
<p>./startSimMotor.sh</p>
<p><strong>Alternatively, if you have EPICS motor PVs modify the PVs inside pyBL.conf:</strong></p>
<p>[diffractometer_config]</p>
<p>name=X11</p>
<p>geometry=SixCircle</p>
<p>engine=you</p>
<p>tag=default_tag</p>
<p>author=pyBL</p>
<p>pv1=test:m1</p>
<p>pv2=test:m2</p>
<p>pv3=test:m3</p>
<p>pv4=test:m4</p>
<p>pv5=test:m5</p>
<p>pv6=test:m6</p>
</div>
<div class="section" id="step-4">
<h2>Step 4<a class="headerlink" href="#step-4" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Please validate the PV names for the simulated motors match the PV names inside pyBL.conf file.</p>
</div>
<p>By modifying the pyBL.conf file, you can select the geometry, calculation engine, angle names etc...
Under the $TOP(cloned git repo)</p>
<p>$./runPyBL</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#step-1">Step 1</a></li>
<li><a class="reference internal" href="#step-2">Step 2</a></li>
<li><a class="reference internal" href="#step-3">Step 3</a></li>
<li><a class="reference internal" href="#step-4">Step 4</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Introduction.html"
                        title="previous chapter">Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Manual.html"
                        title="next chapter">Manual</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/Installation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Manual.html" title="Manual"
             >next</a> |</li>
        <li class="right" >
          <a href="Introduction.html" title="Introduction"
             >previous</a> |</li>
        <li><a href="index.html">pyBL 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Arman Arkilic.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>